<script>
document.addEventListener('DOMContentLoaded', () => {
  const k='tazo', t='tazo';
  const linkData=[ /* same array as before, no id checks yet */ ];
  const linksEl = document.querySelector('#links');
  const spin    = document.querySelector('#spinner');
  let kLive=false, tLive=false;

  /* 1️⃣ render buttons immediately */
  linkData.forEach(l=>{
    linksEl.insertAdjacentHTML('beforeend',`
      <a href="${l.href}" target="_blank" rel="noopener noreferrer"
         class="flex items-center gap-2 justify-center py-3 px-5 rounded-xl text-white bg-gradient-to-r ${l.cls}">
        <img src="https://cdn.simpleicons.org/${l.icon}/FFF" class="w-5 h-5" loading="lazy">
        <span id="${l.icon}-label">${l.name}</span>
      </a>`);
  });
  spin.remove();                 // spinner gone, links visible

  /* 2️⃣ checks run afterwards */
  fetch(`https://kick.com/api/v2/channels/${k}`)
    .then(r=>r.json()).then(d=>{ if(d.livestream){ kLive=true; markLive('kick'); embedKick(); } });

  fetch(`https://api.ivr.fi/v2/twitch/user/${t}`)
    .then(r=>r.json()).then(d=>{ if(d.stream){ tLive=true; markLive('twitch'); if(!kLive) embedTwitch(); } });

  /* helpers */
  function markLive(id){
    const lbl=document.getElementById(`${id}-label`);
    if(lbl) lbl.innerHTML+=' <span class="text-red-500 animate-pulse">● Live</span>';
  }
  function embedKick(){ /* same iframe logic */ }
  function embedTwitch(){ /* same iframe logic */ }
});
</script>