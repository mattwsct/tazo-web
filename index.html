<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Tazo | IRL Streamer</title>
    <link rel="icon" href="https://twitter.com/HyperTazo/profile_image?size=original" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              accent: '#00ffe0',
            },
            animation: {
              gradient: 'gradientBG 6s ease infinite',
            },
            keyframes: {
              gradientBG: {
                '0%, 100%': { backgroundPosition: '0% 50%' },
                '50%': { backgroundPosition: '100% 50%' },
              },
            },
          },
        },
      }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  </head>
  <body class="bg-zinc-950 text-white font-sans">
    <!-- Hero / Profile Section -->
    <div class="relative h-72 w-full overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-[#00ffe0] via-purple-500 to-[#00ffe0] bg-[length:200%_200%] animate-gradient"></div>
      <div class="absolute inset-0 bg-black bg-opacity-60"></div>
      <div class="relative z-10 flex flex-col items-center justify-center h-full">
        <img src="https://twitter.com/HyperTazo/profile_image?size=original"
             class="rounded-full w-28 h-28 border-4 border-white shadow-md" />
        <h1 class="text-3xl font-bold mt-4">Tazo</h1>
        <p class="text-zinc-300 text-sm">IRL Streamer from the Gold Coast, Australia ðŸ’š</p>
      </div>
    </div>

    <!-- Stream Container -->
    <div id="stream-container" class="w-full max-w-screen-md mx-auto mt-6 px-4"></div>
    <div id="twitch-indicator" class="text-center text-red-500 font-semibold mt-2"></div>

    <!-- Link Grid -->
    <div id="link-section" class="grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-screen-md mx-auto mt-8 px-4"></div>

    <!-- Stream Detection Script -->
    <script>
      const kickUsername = "tazo";
      const twitchUsername = "tazo";
      const container = document.getElementById("stream-container");
      const linkSection = document.getElementById("link-section");
      const twitchIndicator = document.getElementById("twitch-indicator");

      let isKickLive = false;
      let isTwitchLive = false;

      const allLinks = [
        { name: "Kick", href: "https://kick.com/tazo", id: "kick", icon: "kick" },
        { name: "Twitch", href: "https://twitch.tv/tazo", id: "twitch", icon: "twitch" },
        { name: "YouTube VODs", href: "https://youtube.com/@HyperTazo", icon: "youtube" },
        { name: "Instagram", href: "https://instagram.com/HyperTazo", icon: "instagram" },
        { name: "TikTok", href: "https://tiktok.com/@HyperTazo", icon: "tiktok" },
        { name: "Twitter / X", href: "https://x.com/HyperTazo", icon: "x" },
        { name: "Join Discord", href: "https://discord.tazo.wtf", icon: "discord" },
        { name: "Support on Ko-fi", href: "https://ko-fi.com/HyperTazo", icon: "ko-fi" },
        { name: "Wishlist", href: "https://wishlist.tazo.wtf", icon: "amazon" },
        { name: "Tip / TTS", href: "https://tip.tazo.wtf", icon: "paypal" },
        { name: "Gear I Use", href: "https://gear.tazo.wtf", icon: "gear" },
      ];

      fetch(`https://kick.com/api/v2/channels/${kickUsername}`)
        .then(res => res.json())
        .then(kickData => {
          if (kickData.livestream) {
            isKickLive = true;
            embedKick();
            checkTwitch("indicator");
          } else {
            checkTwitch("embed");
          }
        })
        .catch(() => checkTwitch("embed"));

      function embedKick() {
        const iframe = document.createElement("iframe");
        iframe.src = `https://kick.com/embed/${kickUsername}`;
        iframe.width = "100%";
        iframe.height = "480";
        iframe.allowFullscreen = true;
        iframe.className = "rounded-xl shadow-lg";
        container.appendChild(iframe);
      }

      function checkTwitch(mode) {
        fetch(`https://api.ivr.fi/v2/twitch/user/${twitchUsername}`)
          .then(res => res.json())
          .then(twitchData => {
            if (twitchData.stream) {
              isTwitchLive = true;
              if (mode === "embed") {
                embedTwitch();
              } else if (mode === "indicator") {
                twitchIndicator.innerHTML = '<a href="https://twitch.tv/tazo" class="text-red-500 underline">ðŸ”´ Also live on Twitch</a>';
              }
            }
            renderLinks();
          })
          .catch(() => renderLinks());
      }

      function embedTwitch() {
        const iframe = document.createElement("iframe");
        iframe.src = `https://player.twitch.tv/?channel=${twitchUsername}&parent=${location.hostname}`;
        iframe.width = "100%";
        iframe.height = "480";
        iframe.allowFullscreen = true;
        iframe.className = "rounded-xl shadow-lg";
        container.appendChild(iframe);
      }

      function renderLinks() {
        allLinks.forEach(link => {
          if ((link.id === "kick" && isKickLive) || (link.id === "twitch" && isTwitchLive)) return;

          const a = document.createElement("a");
          a.href = link.href;
          a.target = "_blank";
          a.className = "bg-zinc-900 hover:bg-accent text-white font-semibold py-3 px-5 rounded-xl text-center border border-accent transition flex items-center justify-center gap-2";

          const img = document.createElement("img");
          img.src = `https://cdn.simpleicons.org/${link.icon}/00ffe0`;
          img.alt = link.name;
          img.className = "w-5 h-5";

          const span = document.createElement("span");
          span.textContent = link.name;

          a.appendChild(img);
          a.appendChild(span);
          linkSection.appendChild(a);
        });
      }
    </script>
  </body>
</html>
